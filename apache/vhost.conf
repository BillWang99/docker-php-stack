# 預設主機 - 顯示專案列表
<VirtualHost *:80>
    ServerName localhost
    DocumentRoot "/var/www/html"
    DirectoryIndex index.php index.html
    
    <Directory "/var/www/html">
        AllowOverride All
        Require all granted
        Options Indexes FollowSymLinks
    </Directory>

    # PHP-FPM 代理設定
    <FilesMatch \.php$>
        SetHandler "proxy:fcgi://php:9000"
    </FilesMatch>

    <Directory "/var/www">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    <Directory "/var/www/html/tcm_shop_backend/public">
        Options +FollowSymLinks +Indexes
        AllowOverride All
        Require all granted
    </Directory>

    # tcm_files 共享資料夾
    <Directory "/var/www/html/tcm_files">
        Options +Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    ErrorLog /proc/self/fd/2
    CustomLog /proc/self/fd/1 common
</VirtualHost>

# 載入各專案的獨立配置
Include conf/conf.d/sites/*.conf